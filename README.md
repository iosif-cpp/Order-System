# Система управления пользователями и заказами

## Обзор
Этот проект проект представляет собой сервис для управления заказами с использованием Spring Boot. Он состоит из двух взаимодействующих микросервисов:
1. **Сервис пользователей** - управляет регистрацией, аутентификацией и безопасностью пользователей.
2. **Сервис заказов** - обрабатывает создание и управление заказами для зарегистрированных пользователей.

Система использует Kafka для обмена событиями между сервисами, PostgreSQL для хранения данных и JWT для безопасной аутентификации.

---

## Функциональность

### 1. Сервис пользователей
- **Аутентификация и авторизация**
    - Регистрация и вход пользователей (JWT-токены)
    - Управление ролями (USER/ADMIN)
    - Безопасное хранение паролей (шифрование BCrypt)

- **Публикация событий**
    - Публикует события `USER_REGISTERED` в Kafka при успешной регистрации пользователя.

- **API эндпоинты**
  | Метод  | Путь                    | Описание                        |
  |--------|-------------------------|---------------------------------|
  | POST   | `/api/v1/auth/register` | Регистрация нового пользователя |
  | POST   | `/api/v1/auth/login`    | Аутентификация пользователя     |

### 2. Сервис заказов
- **Управление заказами**
    - Создание заказов, связанных с зарегистрированными пользователями.
    - Получение заказов по ID пользователя.

- **Обработка событий**
    - Подписывается на события `USER_REGISTERED` из Kafka.
    - Создает локальные ссылки на пользователей (`UserRef`) для связи с заказами.

- **Логирование через AOP**
    - Логирует все вызовы методов сервиса для отслеживания.

- **API эндпоинты**
  | Метод  | Путь                      | Описание                       |
  |--------|---------------------------|--------------------------------|
  | POST   | `/api/v1/orders`          | Создание нового заказа         |
  | GET    | `/api/v1/orders/user/{id}`| Получение заказов пользователя |

---

## Технологический стек

### Основные технологии
- **Spring Boot**: Версия 3.2
- **Модули Spring**:
    - Spring Security (JWT-аутентификация)
    - Spring Data JPA (взаимодействие с базой данных)
    - Spring Kafka (обмен событиями)
- **База данных**: PostgreSQL
- **Сборка**: Gradle (Kotlin DSL)
- **Дополнительные библиотеки**:
    - Lombok (для уменьшения шаблонного кода)
    - AOP (Aspect-Oriented Programming для логирования)

---

